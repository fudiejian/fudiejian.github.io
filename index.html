<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP请求工具</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input {
            width: 100%;
            margin-bottom: 10px;
            padding: 5px;
        }

        textarea {
            width: 100%;
            height: 100px;
            margin-bottom: 10px;
            padding: 5px;
        }

        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<label for="requestMethod">请求方法:</label>
<select id="requestMethod" name="requestMethod">
    <option value="GET">GET</option>
    <option value="POST">POST</option>
</select>

<br>

<label for="requestUrl">请求地址:</label>
<input type="text" id="requestUrl" name="requestUrl" placeholder="https://example.com/api">

<br>

<label for="requestHeaders">请求头:</label>
<textarea id="requestHeaders" name="requestHeaders" placeholder='{"Content-Type": "application/json"}'></textarea>

<br>

<label for="requestBody">请求体:</label>
<textarea id="requestBody" name="requestBody" placeholder='{"data": "example"}'></textarea>

<br>

<button type="button" onclick="submitRequest()">发送请求</button>

<hr>

<label for="response">响应:</label>
<textarea id="response" name="response" readonly></textarea>

<script>
function submitRequest() {
    var requestMethod = document.getElementById('requestMethod').value;
    var requestUrl = document.getElementById('requestUrl').value;
    var requestHeaders = document.getElementById('requestHeaders').value;
    var requestBody = document.getElementById('requestBody').value;

    // 构造请求头
    var headers = new Headers();
    try {
        var parsedHeaders = JSON.parse(requestHeaders);
        for (var key in parsedHeaders) {
            headers.append(key, parsedHeaders[key]);
        }
    } catch (error) {
        console.error('请求头解析错误:', error);
        return;
    }

    // 构造请求体
    var body = null;
    try {
        body = JSON.parse(requestBody);
    } catch (error) {
        console.error('请求体解析错误:', error);
        return;
    }

    // 发起请求
    fetch(requestUrl, {
        method: requestMethod,
        headers: headers,
        body: JSON.stringify(body)
    })
    .then(response => response.json())
    .then(data => {
        document.getElementById('response').value = JSON.stringify(data, null, 2);
    })
    .catch(error => {
        console.error('请求错误:', error);
    });
}
</script>

</body>
</html>
